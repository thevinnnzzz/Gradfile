<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Graduate School Research Collection</title>
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
<script>tailwind.config={theme:{extend:{colors:{primary:'#BF2F2F',secondary:''},borderRadius:{'none':'0px','sm':'4px',DEFAULT:'8px','md':'12px','lg':'16px','xl':'20px','2xl':'24px','3xl':'32px','full':'9999px','button':'8px'}}}}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
<style>
:where([class^="ri-"])::before { content: "\f3c2"; }
body {
font-family: 'Inter', sans-serif;
background-color: #f9fafb;
}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
-webkit-appearance: none;
margin: 0;
}
.custom-radio input[type="radio"] {
display: none;
}
.custom-radio .radio-mark {
display: inline-block;
width: 20px;
height: 20px;
border-radius: 50%;
border: 2px solid #d1d5db;
position: relative;
margin-right: 8px;
vertical-align: middle;
transition: all 0.2s ease;
}
.custom-radio input[type="radio"]:checked + .radio-mark {
border-color: #BF2F2F;
}
.custom-radio input[type="radio"]:checked + .radio-mark:after {
content: '';
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 10px;
height: 10px;
border-radius: 50%;
background-color: #BF2F2F;
}
</style>
</head>
<body>
<div class="min-h-screen flex flex-col">
<!-- Header -->
<header class="bg-white text-primary shadow-md">
<div class="container mx-auto px-4 py-4 flex justify-between items-center">
<div class="flex items-center">
<img src="https://static.readdy.ai/image/2610098eb4b7d6791c922033875fe1ac/cb8d8ce12e7b02e44cac157a69c7b894.png" alt="LPU Logo" class="h-12 mr-3">
<span class="hidden md:inline-block text-lg font-medium">Undergraduate School Research Collection</span>
</div>
<nav>
<ul class="flex space-x-6">
<li><button id="adminLoginBtn" class="bg-primary text-white px-4 py-2 !rounded-button font-medium hover:bg-opacity-90 transition whitespace-nowrap">Admin Login</button></li>
<li><button id="adminLogoutBtn" class="hidden bg-gray-100 text-gray-800 px-4 py-2 !rounded-button font-medium hover:bg-gray-200 transition flex items-center whitespace-nowrap">
<i class="ri-logout-box-line mr-2"></i>
Logout
</button></li>
</ul>
</nav>
</div>
</header>
<!-- Main Content -->
<main class="flex-grow container mx-auto px-4 py-8">
<div id="submissionForm" class="max-w-4xl mx-auto bg-white shadow-md rounded p-8">
<h2 class="text-2xl font-semibold text-gray-800 mb-6">Research Record Submission</h2>
<!-- User Type Selection -->
<div class="mb-8">
<h3 class="text-lg font-medium text-gray-700 mb-3">Select User Type:</h3>
<div class="flex space-x-6">
<label class="custom-radio flex items-center cursor-pointer">
<input type="radio" name="userType" value="lpu" checked id="lpuRadio">
<span class="radio-mark"></span>
<span class="text-gray-800">LPU Student</span>
</label>
<label class="custom-radio flex items-center cursor-pointer">
<input type="radio" name="userType" value="non-lpu" id="nonLpuRadio">
<span class="radio-mark"></span>
<span class="text-gray-800">Non-LPU Student</span>
</label>
</div>
</div>
<!-- Form -->
<form id="researchForm" class="space-y-6">
<!-- Common Fields -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="col-span-2 md:col-span-1">
<label for="fullName" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
<input type="text" id="fullName" name="fullName" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required>
</div>
<!-- LPU Student Fields -->
<div id="lpuFields" class="col-span-2 md:col-span-1">
<label for="studentNumber" class="block text-sm font-medium text-gray-700 mb-1">Student Number</label>
<input type="text" id="studentNumber" name="studentNumber" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required>
</div>
<div id="campusField" class="col-span-2 md:col-span-1">
<label for="campus" class="block text-sm font-medium text-gray-700 mb-1">Campus</label>
<div class="relative">
<select id="campus" name="campus" class="w-full px-4 py-2 border border-gray-300 rounded appearance-none focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-8" required>
<option value="">Select Campus</option>
<option value="Main Campus">Main Campus</option>
<option value="LIMA Campus">LIMA Campus</option>
<option value="Riverside Campus">Riverside Campus</option>
</select>
<div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
<i class="ri-arrow-down-s-line text-gray-500"></i>
</div>
</div>
</div>
<div id="programField" class="col-span-2 md:col-span-1">
<label for="program" class="block text-sm font-medium text-gray-700 mb-1">Program/Department</label>
<div class="relative">
<select id="program" name="program" class="w-full px-4 py-2 border border-gray-300 rounded appearance-none focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-8" required>
<option value="">Select Program/Department</option>
<optgroup label="College of Nursing">
  <option value="BS Nursing">BS Nursing</option>
</optgroup>
<optgroup label="College of International Tourism & Hospitality Management">
  <option value="BS International Travel and Tourism Management">BS International Travel and Tourism Management</option>
  <option value="BS International Hospitality Management">BS International Hospitality Management</option>
  <option value="Associate in International Travel & Tourism Management">Associate in International Travel & Tourism Management</option>
  <option value="Associate in International Hospitality Management">Associate in International Hospitality Management</option>
</optgroup>
<optgroup label="College of Business Administration">
  <option value="BS Accountancy">BS Accountancy</option>
  <option value="BS Business Administration">BS Business Administration</option>
  <option value="BS Customs Administration">BS Customs Administration</option>
</optgroup>
<optgroup label="College of Criminal Justice Education">
  <option value="BS Criminology">BS Criminology</option>
  <option value="Bachelor of Forensic Science">Bachelor of Forensic Science</option>
</optgroup>
<optgroup label="College of Dentistry">
  <option value="Doctor of Dental Medicine">Doctor of Dental Medicine</option>
</optgroup>
<optgroup label="College of Computing, Arts and Sciences">
  <option value="AB Communication">AB Communication</option>
  <option value="AB Psychology">AB Psychology</option>
  <option value="BS Psychology">BS Psychology</option>
  <option value="Bachelor of Multimedia Arts">Bachelor of Multimedia Arts</option>
  <option value="BS Computer Science">BS Computer Science</option>
  <option value="BS Information Technology">BS Information Technology</option>
</optgroup>
<optgroup label="College of Allied Medical Professions">
  <option value="BS Biology (Medical Biology)">BS Biology (Medical Biology)</option>
  <option value="BS Medical Laboratory Science">BS Medical Laboratory Science</option>
  <option value="BS Pharmacy">BS Pharmacy</option>
  <option value="BS Physical Therapy">BS Physical Therapy</option>
  <option value="BS Radiologic Technology">BS Radiologic Technology</option>
</optgroup>
<optgroup label="Lyceum International Maritime Academy">
  <option value="BS Marine Transportation">BS Marine Transportation</option>
  <option value="BS Marine Engineering">BS Marine Engineering</option>
</optgroup>
<optgroup label="Expanded Tertiary Education Equivalency and Accreditation Program (ETEEAP)">
  <option value="ETEEAP - BS Business Administration">BS Business Administration</option>
  <option value="ETEEAP - BS Criminology">BS Criminology</option>
  <option value="ETEEAP - BS Information Technology">BS Information Technology</option>
  <option value="ETEEAP - BS International Hospitality Management">BS International Hospitality Management</option>
  <option value="ETEEAP - BS Nursing">BS Nursing</option>
</optgroup>
<optgroup label="Center for Technical Education">
  <option value="Certificate in Culinary Arts">Certificate in Culinary Arts</option>
  <option value="Certificate in Pastry Arts">Certificate in Pastry Arts</option>
</optgroup>
</select>
<div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
<i class="ri-arrow-down-s-line text-gray-500"></i>
</div>
</div>
</div>
<!-- Non-LPU Student Fields -->
<div id="schoolField" class="col-span-2 hidden">
<label for="schoolName" class="block text-sm font-medium text-gray-700 mb-1">Name of School</label>
<input type="text" id="schoolName" name="schoolName" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
</div>
<!-- Thesis Title (Common) -->
<div class="col-span-2">
<label for="thesisTitle" class="block text-sm font-medium text-gray-700 mb-1">Title of Thesis</label>
<textarea id="thesisTitle" name="thesisTitle" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required></textarea>
</div>
</div>
<!-- Submit Button -->
<div class="flex justify-end">
<button type="submit" class="bg-primary text-white px-6 py-3 !rounded-button font-medium hover:bg-opacity-90 transition flex items-center whitespace-nowrap">
<i class="ri-save-line mr-2"></i>
Submit Research Record
</button>
</div>
</form>
<!-- Success Modal (Hidden by default) -->
<div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
<div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden">
<div class="bg-primary px-6 py-4 flex justify-between items-center">
<h3 class="text-xl font-medium text-white flex items-center">
<i class="ri-file-list-line mr-2"></i>
Review Submission
</h3>
<button id="closeModalBtn" class="text-white hover:text-gray-200">
<i class="ri-close-line text-xl"></i>
</button>
</div>
<div class="px-6 py-4">
<div class="mb-4">
<p class="text-gray-700 mb-2">Please review your submission details before confirming.</p>
</div>
<div class="border rounded-lg p-4 bg-gray-50 mb-4">
<h4 class="font-medium text-gray-800 mb-2">Submission Details</h4>
<div class="space-y-2 text-sm">
<div class="grid grid-cols-3">
<span class="text-gray-600 col-span-1">User Type:</span>
<span id="summaryUserType" class="font-medium col-span-2"></span>
</div>
<div class="grid grid-cols-3">
<span class="text-gray-600 col-span-1">Full Name:</span>
<span id="summaryName" class="font-medium col-span-2"></span>
</div>
<div id="summaryStudentNumberRow" class="grid grid-cols-3">
<span class="text-gray-600 col-span-1">Student Number:</span>
<span id="summaryStudentNumber" class="font-medium col-span-2"></span>
</div>
<div id="summaryCampusRow" class="grid grid-cols-3">
<span class="text-gray-600 col-span-1">Campus:</span>
<span id="summaryCampus" class="font-medium col-span-2"></span>
</div>
<div id="summaryProgramRow" class="grid grid-cols-3">
<span class="text-gray-600 col-span-1">Program:</span>
<span id="summaryProgram" class="font-medium col-span-2"></span>
</div>
<div id="summarySchoolRow" class="grid grid-cols-3 hidden">
<span class="text-gray-600 col-span-1">School:</span>
<span id="summarySchool" class="font-medium col-span-2"></span>
</div>
<div class="grid grid-cols-3">
<span class="text-gray-600 col-span-1">Thesis Title:</span>
<span id="summaryThesis" class="font-medium col-span-2"></span>
</div>
<div class="grid grid-cols-3">
<span class="text-gray-600 col-span-1">Date:</span>
<span id="summaryDate" class="font-medium col-span-2"></span>
</div>
</div>
</div>
<div class="flex justify-between">
<button id="editSubmissionBtn" class="bg-gray-100 text-gray-800 px-4 py-2 !rounded-button font-medium hover:bg-gray-200 transition flex items-center whitespace-nowrap">
<i class="ri-edit-line mr-2"></i>
Edit
</button>
<button id="confirmSubmissionBtn" class="bg-primary text-white px-4 py-2 !rounded-button font-medium hover:bg-opacity-90 transition whitespace-nowrap">
Confirm
</button>
</div>
</div>
</div>
</div>
</div>
<!-- Admin Login Modal (Hidden by default) -->
<div id="adminLoginModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
<div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden">
<div class="bg-primary px-6 py-4 flex justify-between items-center">
<h3 class="text-xl font-medium text-white flex items-center">
<i class="ri-admin-line mr-2"></i>
Admin Login
</h3>
<button id="closeLoginModalBtn" class="text-white hover:text-gray-200">
<i class="ri-close-line text-xl"></i>
</button>
</div>
<div class="px-6 py-6">
<form id="adminLoginForm" class="space-y-4">
<div>
<label for="adminUsername" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
<input type="text" id="adminUsername" name="adminUsername" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required>
</div>
<div>
<label for="adminPassword" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
<div class="relative">
<input type="password" id="adminPassword" name="adminPassword" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required>
<button type="button" id="togglePassword" class="absolute right-3 top-1/2 transform -translate-y-1/2">
<i class="ri-eye-off-line text-gray-500"></i>
</button>
</div>
</div>
<div id="loginError" class="hidden text-red-500 text-sm"></div>
<button type="submit" class="w-full bg-primary text-white px-4 py-3 !rounded-button font-medium hover:bg-opacity-90 transition whitespace-nowrap">
Login
</button>
</form>
</div>
</div>
</div>
<!-- Admin Dashboard (Hidden by default) -->
<div id="adminDashboard" class="hidden max-w-6xl mx-auto mt-12 bg-white shadow-md rounded p-8">
<div class="flex justify-between items-center mb-6">
<h2 class="text-2xl font-semibold text-gray-800">Admin Dashboard</h2>
<div class="flex space-x-4">
<div class="flex space-x-2">
<div class="relative">
<select id="searchField" class="px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent appearance-none pr-8">
<option value="all">All Fields</option>
<option value="name">Name</option>
<option value="studentNumber">Student Number</option>
<option value="program">Program/Department</option>
<option value="school">School Name</option>
<option value="thesisTitle">Thesis Title</option>
</select>
<div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
<i class="ri-arrow-down-s-line text-gray-500"></i>
</div>
</div>
<div class="relative">
<input type="text" id="searchInput" placeholder="Search records..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-r-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
<div class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 flex items-center justify-center">
<i class="ri-search-line text-gray-500"></i>
</div>
</div>
</div>
<div class="relative">
<input type="date" id="dateFilter" class="px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
</div>
<button id="adminExportBtn" class="bg-primary text-white px-4 py-2 !rounded-button font-medium hover:bg-opacity-90 transition flex items-center whitespace-nowrap">
<i class="ri-download-line mr-2"></i>
Export Filtered Records
</button>
</div>
</div>
<!-- Records Table -->
<div class="overflow-x-auto max-h-[600px] overflow-y-auto">
<table class="min-w-full bg-white">
<thead class="sticky top-0 bg-gray-100">
<tr class="text-gray-700">
<th class="py-3 px-4 text-left font-medium">Date</th>
<th class="py-3 px-4 text-left font-medium">User Type</th>
<th class="py-3 px-4 text-left font-medium">Name</th>
<th class="py-3 px-4 text-left font-medium">Student Number</th>
<th class="py-3 px-4 text-left font-medium">Program/Department</th>
<th class="py-3 px-4 text-left font-medium">School Name</th>
<th class="py-3 px-4 text-left font-medium">Thesis Title</th>
<th class="py-3 px-4 text-left font-medium">Actions</th>
</tr>
</thead>
<tbody class="divide-y divide-gray-200">
</tbody>
</table>
</div>
</div>
</main>
</div>
<!-- Delete Confirmation Modal -->
<div id="deleteConfirmationModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden">
    <div class="bg-primary px-6 py-4 flex justify-between items-center">
      <h3 class="text-xl font-medium text-white flex items-center">
        <i class="ri-delete-bin-line mr-2"></i>
        Confirm Deletion
      </h3>
      <button id="closeDeleteModalBtn" class="text-white hover:text-gray-200">
        <i class="ri-close-line text-xl"></i>
      </button>
    </div>
    <div class="px-6 py-4">
      <div class="mb-6">
        <p class="text-gray-700">Are you sure you want to delete this research record? This action cannot be undone.</p>
      </div>
      <div class="flex justify-end space-x-4">
        <button id="cancelDeleteBtn" class="bg-gray-100 text-gray-800 px-4 py-2 !rounded-button font-medium hover:bg-gray-200 transition">
          Cancel
        </button>
        <button id="confirmDeleteBtn" class="bg-red-600 text-white px-4 py-2 !rounded-button font-medium hover:bg-red-700 transition">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Edit Modal -->
<div id="editModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-auto overflow-hidden">
    <div class="bg-primary px-6 py-4 flex justify-between items-center">
      <h3 class="text-xl font-medium text-white flex items-center">
        <i class="ri-edit-line mr-2"></i>
        Edit Research Record
      </h3>
      <button id="closeEditModalBtn" class="text-white hover:text-gray-200">
        <i class="ri-close-line text-xl"></i>
      </button>
    </div>
    <div class="px-6 py-4">
      <form id="editForm" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="col-span-2">
            <label class="block text-sm font-medium text-gray-700 mb-3">User Type:</label>
            <div class="flex space-x-6">
              <label class="custom-radio flex items-center cursor-pointer">
                <input type="radio" name="editUserType" value="lpu" id="editLpuRadio">
                <span class="radio-mark"></span>
                <span class="text-gray-800">LPU Student</span>
              </label>
              <label class="custom-radio flex items-center cursor-pointer">
                <input type="radio" name="editUserType" value="non-lpu" id="editNonLpuRadio">
                <span class="radio-mark"></span>
                <span class="text-gray-800">Non-LPU Student</span>
              </label>
            </div>
          </div>
          <div class="col-span-2 md:col-span-1">
            <label for="editFullName" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
            <input type="text" id="editFullName" name="editFullName" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required>
          </div>
          <div id="editLpuFields" class="col-span-2 md:col-span-1">
            <label for="editStudentNumber" class="block text-sm font-medium text-gray-700 mb-1">Student Number</label>
            <input type="text" id="editStudentNumber" name="editStudentNumber" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
          </div>
          <div id="editCampusField" class="col-span-2 md:col-span-1">
            <label for="editCampus" class="block text-sm font-medium text-gray-700 mb-1">Campus</label>
            <div class="relative">
              <select id="editCampus" name="editCampus" class="w-full px-4 py-2 border border-gray-300 rounded appearance-none focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-8">
                <option value="">Select Campus</option>
                <option value="Main Campus">Main Campus</option>
                <option value="LIMA Campus">LIMA Campus</option>
                <option value="Riverside Campus">Riverside Campus</option>
              </select>
              <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                <i class="ri-arrow-down-s-line text-gray-500"></i>
              </div>
            </div>
          </div>
          <div id="editProgramField" class="col-span-2 md:col-span-1">
            <label for="editProgram" class="block text-sm font-medium text-gray-700 mb-1">Program/Department</label>
            <div class="relative">
              <select id="editProgram" name="editProgram" class="w-full px-4 py-2 border border-gray-300 rounded appearance-none focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-8">
                <option value="">Select Program/Department</option>
                <optgroup label="College of Nursing">
                  <option value="BS Nursing">BS Nursing</option>
                </optgroup>
                <optgroup label="College of International Tourism & Hospitality Management">
                  <option value="BS International Travel and Tourism Management">BS International Travel and Tourism Management</option>
                  <option value="BS International Hospitality Management">BS International Hospitality Management</option>
                  <option value="Associate in International Travel & Tourism Management">Associate in International Travel & Tourism Management</option>
                  <option value="Associate in International Hospitality Management">Associate in International Hospitality Management</option>
                </optgroup>
                <optgroup label="College of Business Administration">
                  <option value="BS Accountancy">BS Accountancy</option>
                  <option value="BS Business Administration">BS Business Administration</option>
                  <option value="BS Customs Administration">BS Customs Administration</option>
                </optgroup>
                <optgroup label="College of Criminal Justice Education">
                  <option value="BS Criminology">BS Criminology</option>
                  <option value="Bachelor of Forensic Science">Bachelor of Forensic Science</option>
                </optgroup>
                <optgroup label="College of Dentistry">
                  <option value="Doctor of Dental Medicine">Doctor of Dental Medicine</option>
                </optgroup>
                <optgroup label="College of Computing, Arts and Sciences">
                  <option value="AB Communication">AB Communication</option>
                  <option value="AB Psychology">AB Psychology</option>
                  <option value="BS Psychology">BS Psychology</option>
                  <option value="Bachelor of Multimedia Arts">Bachelor of Multimedia Arts</option>
                  <option value="BS Computer Science">BS Computer Science</option>
                  <option value="BS Information Technology">BS Information Technology</option>
                </optgroup>
                <optgroup label="College of Allied Medical Professions">
                  <option value="BS Biology (Medical Biology)">BS Biology (Medical Biology)</option>
                  <option value="BS Medical Laboratory Science">BS Medical Laboratory Science</option>
                  <option value="BS Pharmacy">BS Pharmacy</option>
                  <option value="BS Physical Therapy">BS Physical Therapy</option>
                  <option value="BS Radiologic Technology">BS Radiologic Technology</option>
                </optgroup>
                <optgroup label="Lyceum International Maritime Academy">
                  <option value="BS Marine Transportation">BS Marine Transportation</option>
                  <option value="BS Marine Engineering">BS Marine Engineering</option>
                </optgroup>
                <optgroup label="Expanded Tertiary Education Equivalency and Accreditation Program (ETEEAP)">
                  <option value="ETEEAP - BS Business Administration">BS Business Administration</option>
                  <option value="ETEEAP - BS Criminology">BS Criminology</option>
                  <option value="ETEEAP - BS Information Technology">BS Information Technology</option>
                  <option value="ETEEAP - BS International Hospitality Management">BS International Hospitality Management</option>
                  <option value="ETEEAP - BS Nursing">BS Nursing</option>
                </optgroup>
                <optgroup label="Center for Technical Education">
                  <option value="Certificate in Culinary Arts">Certificate in Culinary Arts</option>
                  <option value="Certificate in Pastry Arts">Certificate in Pastry Arts</option>
                </optgroup>
              </select>
              <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                <i class="ri-arrow-down-s-line text-gray-500"></i>
              </div>
            </div>
          </div>
          <div id="editSchoolField" class="col-span-2 hidden">
            <label for="editSchoolName" class="block text-sm font-medium text-gray-700 mb-1">Name of School</label>
            <input type="text" id="editSchoolName" name="editSchoolName" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
          </div>
          <div class="col-span-2">
            <label for="editThesisTitle" class="block text-sm font-medium text-gray-700 mb-1">Title of Thesis</label>
            <textarea id="editThesisTitle" name="editThesisTitle" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required></textarea>
          </div>
        </div>
        <div class="flex justify-end space-x-4">
          <button type="button" id="cancelEditBtn" class="bg-gray-100 text-gray-800 px-4 py-2 !rounded-button font-medium hover:bg-gray-200 transition">
            Cancel
          </button>
          <button type="submit" class="bg-primary text-white px-4 py-2 !rounded-button font-medium hover:bg-opacity-90 transition">
            Save Changes
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- View Modal -->
<div id="viewModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-auto overflow-hidden">
    <div class="bg-primary px-6 py-4 flex justify-between items-center">
      <h3 class="text-xl font-medium text-white flex items-center">
        <i class="ri-eye-line mr-2"></i>
        Research Record Details
      </h3>
      <button id="closeViewModalBtn" class="text-white hover:text-gray-200">
        <i class="ri-close-line text-xl"></i>
      </button>
    </div>
    <div class="px-6 py-4">
      <div class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="col-span-2">
            <h4 class="text-lg font-medium text-gray-800 mb-2">Submission Information</h4>
            <div class="bg-gray-50 rounded-lg p-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <p class="text-sm text-gray-600">Submission Date</p>
                  <p id="viewDate" class="font-medium text-gray-800"></p>
                </div>
                <div>
                  <p class="text-sm text-gray-600">User Type</p>
                  <p id="viewUserType" class="font-medium text-gray-800"></p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-span-2">
            <h4 class="text-lg font-medium text-gray-800 mb-2">Personal Information</h4>
            <div class="bg-gray-50 rounded-lg p-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <p class="text-sm text-gray-600">Full Name</p>
                  <p id="viewName" class="font-medium text-gray-800"></p>
                </div>
                <div id="viewStudentNumberContainer">
                  <p class="text-sm text-gray-600">Student Number</p>
                  <p id="viewStudentNumber" class="font-medium text-gray-800"></p>
                </div>
                <div id="viewCampusContainer">
                  <p class="text-sm text-gray-600">Campus</p>
                  <p id="viewCampus" class="font-medium text-gray-800"></p>
                </div>
                <div id="viewProgramContainer">
                  <p class="text-sm text-gray-600">Program/Department</p>
                  <p id="viewProgram" class="font-medium text-gray-800"></p>
                </div>
                <div id="viewSchoolContainer" class="hidden">
                  <p class="text-sm text-gray-600">School Name</p>
                  <p id="viewSchool" class="font-medium text-gray-800"></p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-span-2">
            <h4 class="text-lg font-medium text-gray-800 mb-2">Research Information</h4>
            <div class="bg-gray-50 rounded-lg p-4">
              <div>
                <p class="text-sm text-gray-600">Thesis Title</p>
                <p id="viewThesisTitle" class="font-medium text-gray-800"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="px-6 py-4 bg-gray-50 border-t border-gray-200">
      <div class="flex justify-end">
        <button id="closeViewModalBtn2" class="bg-primary text-white px-4 py-2 !rounded-button font-medium hover:bg-opacity-90 transition">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Export Modal -->
<div id="exportModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden">
    <div class="bg-primary px-6 py-4 flex justify-between items-center">
      <h3 class="text-xl font-medium text-white flex items-center">
        <i class="ri-download-line mr-2"></i>
        Export Filtered Records
      </h3>
      <button id="closeExportModalBtn" class="text-white hover:text-gray-200">
        <i class="ri-close-line text-xl"></i>
      </button>
    </div>
    <div class="px-6 py-4">
      <div class="mb-6">
        <p class="text-gray-700 mb-4">Select the format and options for exporting the records:</p>
        <p id="exportRecordCount" class="text-sm text-primary font-medium mb-4"></p>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Export Format</label>
            <select id="exportFormat" class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
              <option value="pdf">PDF Document</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Include Fields</label>
            <div class="space-y-2">
              <label class="flex items-center">
                <input type="checkbox" class="form-checkbox text-primary" checked>
                <span class="ml-2 text-gray-700">Date</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="form-checkbox text-primary" checked>
                <span class="ml-2 text-gray-700">User Type</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="form-checkbox text-primary" checked>
                <span class="ml-2 text-gray-700">Name</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="form-checkbox text-primary" checked>
                <span class="ml-2 text-gray-700">Student Number</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="form-checkbox text-primary" checked>
                <span class="ml-2 text-gray-700">Program/Department</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="form-checkbox text-primary" checked>
                <span class="ml-2 text-gray-700">School Name</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="form-checkbox text-primary" checked>
                <span class="ml-2 text-gray-700">Thesis Title</span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="flex justify-end space-x-4">
        <button id="cancelExportBtn" class="bg-gray-100 text-gray-800 px-4 py-2 !rounded-button font-medium hover:bg-gray-200 transition">
          Cancel
        </button>
        <button id="confirmExportBtn" class="bg-primary text-white px-4 py-2 !rounded-button font-medium hover:bg-opacity-90 transition">
          Export
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Logout Confirmation Modal -->
<div id="logoutConfirmationModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden">
    <div class="bg-primary px-6 py-4 flex justify-between items-center">
      <h3 class="text-xl font-medium text-white flex items-center">
        <i class="ri-logout-box-line mr-2"></i>
        Confirm Logout
      </h3>
      <button id="closeLogoutModalBtn" class="text-white hover:text-gray-200">
        <i class="ri-close-line text-xl"></i>
      </button>
    </div>
    <div class="px-6 py-4">
      <div class="mb-6">
        <p class="text-gray-700">Are you sure you want to logout from the admin dashboard?</p>
      </div>
      <div class="flex justify-end space-x-4">
        <button id="cancelLogoutBtn" class="bg-gray-100 text-gray-800 px-4 py-2 !rounded-button font-medium hover:bg-gray-200 transition">
          Cancel
        </button>
        <button id="confirmLogoutBtn" class="bg-primary text-white px-4 py-2 !rounded-button font-medium hover:bg-opacity-90 transition">
          Logout
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// Toggle between LPU and Non-LPU fields
const lpuRadio = document.getElementById('lpuRadio');
const nonLpuRadio = document.getElementById('nonLpuRadio');
const lpuFields = document.getElementById('lpuFields');
const programField = document.getElementById('programField');
const schoolField = document.getElementById('schoolField');
const studentNumber = document.getElementById('studentNumber');
const program = document.getElementById('program');
const schoolName = document.getElementById('schoolName');
lpuRadio.addEventListener('change', function() {
if (this.checked) {
lpuFields.classList.remove('hidden');
programField.classList.remove('hidden');
schoolField.classList.add('hidden');
studentNumber.required = true;
program.required = true;
schoolName.required = false;
}
});
nonLpuRadio.addEventListener('change', function() {
if (this.checked) {
lpuFields.classList.add('hidden');
programField.classList.add('hidden');
schoolField.classList.remove('hidden');
studentNumber.required = false;
program.required = false;
schoolName.required = true;
}
});
// Form submission
const researchForm = document.getElementById('researchForm');
const successModal = document.getElementById('successModal');
const closeModalBtn = document.getElementById('closeModalBtn');
const closeSuccessBtn = document.getElementById('closeSuccessBtn');
const downloadReceiptBtn = document.getElementById('downloadReceiptBtn');
// Generate a random reference number
function generateReferenceNumber() {
const prefix = "RR";
const timestamp = new Date().getTime().toString().slice(-6);
const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
return `${prefix}-${timestamp}-${random}`;
}
// Format date to readable format
function formatDate(date) {
const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
return date.toLocaleDateString('en-US', options);
}
// Close modal function
function closeModal() {
successModal.classList.add('hidden');
}
// Event listeners for closing the modal
closeModalBtn.addEventListener('click', closeModal);
// Edit submission function
document.getElementById('editSubmissionBtn').addEventListener('click', function() {
successModal.classList.add('hidden');
  // Reset the form
  researchForm.reset();
  // Restore the radio button state
  if (document.getElementById('summaryUserType').textContent === 'LPU') {
    lpuRadio.checked = true;
    lpuFields.classList.remove('hidden');
    programField.classList.remove('hidden');
    schoolField.classList.add('hidden');
    studentNumber.required = true;
    program.required = true;
    schoolName.required = false;
  } else {
    nonLpuRadio.checked = true;
    lpuFields.classList.add('hidden');
    programField.classList.add('hidden');
    schoolField.classList.remove('hidden');
    studentNumber.required = false;
    program.required = false;
    schoolName.required = true;
  }
});
// Confirm submission function
document.getElementById('confirmSubmissionBtn').addEventListener('click', function() {
// Show confirmation message
const modalContent = document.querySelector('#successModal .bg-white');
modalContent.innerHTML = `
<div class="bg-primary px-6 py-4 flex justify-between items-center">
<h3 class="text-xl font-medium text-white flex items-center">
<i class="ri-check-line mr-2"></i>
Submission Successful
</h3>
<button id="finalCloseBtn" class="text-white hover:text-gray-200">
<i class="ri-close-line text-xl"></i>
</button>
</div>
<div class="px-6 py-4">
<div class="mb-6 text-center">
<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="ri-check-line text-green-500 ri-2x"></i>
</div>
<p class="text-gray-700 text-lg">Your research record has been submitted successfully.</p>
</div>
<button id="finalCloseBtn2" class="w-full bg-primary text-white px-4 py-3 !rounded-button font-medium hover:bg-opacity-90 transition whitespace-nowrap">
Done
</button>
</div>
`;
  
// Add event listeners to new close buttons
document.getElementById('finalCloseBtn').addEventListener('click', function() {
successModal.classList.add('hidden');
researchForm.reset();
});
  
document.getElementById('finalCloseBtn2').addEventListener('click', function() {
successModal.classList.add('hidden');
researchForm.reset();
});
});
// Store submissions
let submissions = JSON.parse(localStorage.getItem('submissions')) || [
  {
    date: '2025-04-10',
    userType: 'LPU',
    name: 'Michael Johnson',
    studentNumber: '2023-0142',
    program: 'Computer Science',
    school: '-',
    thesisTitle: 'Machine Learning Applications in Healthcare'
  },
  {
    date: '2025-04-09',
    userType: 'Non-LPU',
    name: 'Emily Rodriguez',
    studentNumber: '-',
    program: '-',
    school: 'Stanford University',
    thesisTitle: 'Sustainable Urban Development Models'
  },
  {
    date: '2025-04-08',
    userType: 'LPU',
    name: 'David Thompson',
    studentNumber: '2022-1875',
    program: 'Business Administration',
    school: '-',
    thesisTitle: 'Impact of Digital Transformation on SMEs'
  },
  {
    date: '2025-04-07',
    userType: 'LPU',
    name: 'Sarah Williams',
    studentNumber: '2023-0563',
    program: 'Psychology',
    school: '-',
    thesisTitle: 'Cognitive Behavioral Therapy in Adolescents'
  },
  {
    date: '2025-04-06',
    userType: 'Non-LPU',
    name: 'Robert Chen',
    studentNumber: '-',
    program: '-',
    school: 'MIT',
    thesisTitle: 'Quantum Computing Applications in Cryptography'
  }
];
// Function to save submissions to localStorage
function saveSubmissions() {
  localStorage.setItem('submissions', JSON.stringify(submissions));
}
// Check if admin is logged in on page load
document.addEventListener('DOMContentLoaded', function() {
  const isAdminLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
  if (isAdminLoggedIn) {
    adminDashboard.classList.remove('hidden');
    document.getElementById('submissionForm').classList.add('hidden');
    adminLoginBtn.classList.add('hidden');
    adminLogoutBtn.classList.remove('hidden');
    updateAdminTable();
  }
});
// Modify the form submission handler to save to localStorage
researchForm.addEventListener('submit', function(e) {
e.preventDefault();
// Get form values
const userType = lpuRadio.checked ? 'LPU' : 'Non-LPU';
const fullName = document.getElementById('fullName').value;
const thesisTitle = document.getElementById('thesisTitle').value;
const currentDate = new Date();

// Create new submission object
const newSubmission = {
  date: currentDate.toISOString().split('T')[0],
  userType: userType,
  name: fullName,
  studentNumber: lpuRadio.checked ? document.getElementById('studentNumber').value : '-',
  program: lpuRadio.checked ? document.getElementById('program').value : '-',
  school: !lpuRadio.checked ? document.getElementById('schoolName').value : '-',
  thesisTitle: thesisTitle
};

// Add to submissions array
submissions.unshift(newSubmission);
  
  // Save to localStorage
  saveSubmissions();

// Update admin table if visible
if (!adminDashboard.classList.contains('hidden')) {
  updateAdminTable();
}
// Fill in the summary in the modal
document.getElementById('summaryUserType').textContent = userType;
document.getElementById('summaryName').textContent = fullName;
document.getElementById('summaryThesis').textContent = thesisTitle;
document.getElementById('summaryDate').textContent = formatDate(currentDate);
if (lpuRadio.checked) {
const studentNumber = document.getElementById('studentNumber').value;
const program = document.getElementById('program').value;
const campus = document.getElementById('campus').value;
    document.getElementById('summaryStudentNumber').textContent = studentNumber;
document.getElementById('summaryProgram').textContent = program;
document.getElementById('summaryCampus').textContent = campus;
document.getElementById('summaryStudentNumberRow').classList.remove('hidden');
document.getElementById('summaryProgramRow').classList.remove('hidden');
document.getElementById('summaryCampusRow').classList.remove('hidden');
document.getElementById('summarySchoolRow').classList.add('hidden');
} else {
const schoolName = document.getElementById('schoolName').value;
document.getElementById('summarySchool').textContent = schoolName;
document.getElementById('summaryStudentNumberRow').classList.add('hidden');
document.getElementById('summaryProgramRow').classList.add('hidden');
    document.getElementById('summaryCampusRow').classList.add('hidden');
document.getElementById('summarySchoolRow').classList.remove('hidden');
}
// Show the modal
successModal.classList.remove('hidden');
});
// Admin Login Functionality
const adminLoginBtn = document.getElementById('adminLoginBtn');
const adminLoginModal = document.getElementById('adminLoginModal');
const closeLoginModalBtn = document.getElementById('closeLoginModalBtn');
const adminLoginForm = document.getElementById('adminLoginForm');
const adminDashboard = document.getElementById('adminDashboard');
const adminLogoutBtn = document.getElementById('adminLogoutBtn');
const togglePassword = document.getElementById('togglePassword');
const adminPassword = document.getElementById('adminPassword');
const loginError = document.getElementById('loginError');
// Show admin login modal
adminLoginBtn.addEventListener('click', function() {
adminLoginModal.classList.remove('hidden');
});
// Close admin login modal
closeLoginModalBtn.addEventListener('click', function() {
adminLoginModal.classList.add('hidden');
adminLoginForm.reset();
loginError.classList.add('hidden');
});
// Toggle password visibility
togglePassword.addEventListener('click', function() {
const type = adminPassword.getAttribute('type') === 'password' ? 'text' : 'password';
adminPassword.setAttribute('type', type);
this.innerHTML = type === 'password' ? '<i class="ri-eye-off-line text-gray-500"></i>' : '<i class="ri-eye-line text-gray-500"></i>';
});
// Modify admin login form submission
adminLoginForm.addEventListener('submit', function(e) {
  e.preventDefault();
  const username = document.getElementById('adminUsername').value;
  const password = document.getElementById('adminPassword').value;
  
  // Check credentials
  if (username === 'slrclpubatangasmain' && password === 'slrclpubatangasmain') {
    adminLoginModal.classList.add('hidden');
    adminDashboard.classList.remove('hidden');
    document.getElementById('submissionForm').classList.add('hidden');
    adminLoginBtn.classList.add('hidden');
    adminLogoutBtn.classList.remove('hidden');
    adminLoginForm.reset();
    loginError.classList.add('hidden');
    
    // Save admin login state
    localStorage.setItem('adminLoggedIn', 'true');
    
    // Update table with current submissions
    updateAdminTable();
  } else {
    loginError.textContent = 'Invalid username or password. Please try again.';
    loginError.classList.remove('hidden');
  }
});
// Modify admin logout
const logoutConfirmationModal = document.getElementById('logoutConfirmationModal');
const closeLogoutModalBtn = document.getElementById('closeLogoutModalBtn');
const cancelLogoutBtn = document.getElementById('cancelLogoutBtn');
const confirmLogoutBtn = document.getElementById('confirmLogoutBtn');

// Function to show logout confirmation modal
function showLogoutConfirmation() {
  logoutConfirmationModal.classList.remove('hidden');
}

// Function to hide logout confirmation modal
function hideLogoutConfirmation() {
  logoutConfirmationModal.classList.add('hidden');
}

// Function to perform logout
function performLogout() {
  adminDashboard.classList.add('hidden');
  document.getElementById('submissionForm').classList.remove('hidden');
  adminLoginBtn.classList.remove('hidden');
  adminLogoutBtn.classList.add('hidden');
  // Clear admin login state
  localStorage.removeItem('adminLoggedIn');
  hideLogoutConfirmation();
  
  // Reset the form when logging out
  resetForm();
  
  // Refresh the page
  window.location.reload();
}

// Event listeners for logout modal
closeLogoutModalBtn.addEventListener('click', hideLogoutConfirmation);
cancelLogoutBtn.addEventListener('click', hideLogoutConfirmation);
confirmLogoutBtn.addEventListener('click', performLogout);

// Update admin logout button click handler
adminLogoutBtn.addEventListener('click', showLogoutConfirmation);

// Delete functionality
const deleteConfirmationModal = document.getElementById('deleteConfirmationModal');
const closeDeleteModalBtn = document.getElementById('closeDeleteModalBtn');
const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
let currentSubmissionToDelete = null;

// Function to show delete confirmation modal
function showDeleteConfirmation(submission) {
  currentSubmissionToDelete = submission;
  deleteConfirmationModal.classList.remove('hidden');
}

// Function to hide delete confirmation modal
function hideDeleteConfirmation() {
  deleteConfirmationModal.classList.add('hidden');
  currentSubmissionToDelete = null;
}

// Event listeners for delete modal
closeDeleteModalBtn.addEventListener('click', hideDeleteConfirmation);
cancelDeleteBtn.addEventListener('click', hideDeleteConfirmation);

// Handle delete confirmation
confirmDeleteBtn.addEventListener('click', function() {
  if (currentSubmissionToDelete) {
    // Find and remove the submission from the array
    submissions = submissions.filter(sub => 
      sub.date !== currentSubmissionToDelete.date || 
      sub.name !== currentSubmissionToDelete.name
    );
    
    // Save updated submissions to localStorage
    saveSubmissions();
    
    // Refresh the table
    updateAdminTable();
    
    // Hide the modal
    hideDeleteConfirmation();
  }
});

// Add delete button event listeners to table rows
function addDeleteButtonListeners() {
  document.querySelectorAll('.delete-btn').forEach(button => {
    button.addEventListener('click', function() {
      const row = this.closest('tr');
      const submission = {
        date: row.cells[0].textContent,
        userType: row.cells[1].textContent,
        name: row.cells[2].textContent,
        studentNumber: row.cells[3].textContent,
        program: row.cells[4].textContent,
        school: row.cells[5].textContent,
        thesisTitle: row.cells[6].textContent
      };
      showDeleteConfirmation(submission);
    });
  });
}

// Update the updateAdminTable function to include delete buttons
function updateAdminTable() {
  const tbody = document.querySelector('#adminDashboard table tbody');
  tbody.innerHTML = '';
  
  // Sort submissions by date in descending order (newest first)
  const sortedSubmissions = [...submissions].sort((a, b) => {
    return new Date(b.date) - new Date(a.date);
  });
  
  sortedSubmissions.forEach(submission => {
    const tr = document.createElement('tr');
    tr.className = 'hover:bg-gray-50';
    tr.innerHTML = `
      <td class="py-3 px-4">${submission.date}</td>
      <td class="py-3 px-4">${submission.userType}</td>
      <td class="py-3 px-4">${submission.name}</td>
      <td class="py-3 px-4">${submission.studentNumber}</td>
      <td class="py-3 px-4">${submission.program}</td>
      <td class="py-3 px-4">${submission.school}</td>
      <td class="py-3 px-4">${submission.thesisTitle}</td>
      <td class="py-3 px-4">
        <div class="flex space-x-2">
          <button class="text-blue-600 hover:text-blue-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-eye-line"></i>
          </button>
          <button class="text-green-600 hover:text-green-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-edit-line"></i>
          </button>
          <button class="delete-btn text-red-600 hover:text-red-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-delete-bin-line"></i>
          </button>
        </div>
      </td>
    `;
    tbody.appendChild(tr);
  });
  
  // Add event listeners to the new delete buttons
  addDeleteButtonListeners();
}

// Initial render of the table
updateAdminTable();

// Edit functionality
const editModal = document.getElementById('editModal');
const closeEditModalBtn = document.getElementById('closeEditModalBtn');
const cancelEditBtn = document.getElementById('cancelEditBtn');
const editForm = document.getElementById('editForm');
let currentSubmissionToEdit = null;

// Function to show edit modal
function showEditModal(submission) {
  currentSubmissionToEdit = submission;
  
  // Populate form fields
  document.getElementById('editFullName').value = submission.name;
  document.getElementById('editThesisTitle').value = submission.thesisTitle;
  
  if (submission.userType === 'LPU') {
    document.getElementById('editLpuRadio').checked = true;
    document.getElementById('editStudentNumber').value = submission.studentNumber;
    document.getElementById('editProgram').value = submission.program;
    document.getElementById('editCampus').value = submission.campus || '';
    document.getElementById('editLpuFields').classList.remove('hidden');
    document.getElementById('editProgramField').classList.remove('hidden');
    document.getElementById('editCampusField').classList.remove('hidden');
    document.getElementById('editSchoolField').classList.add('hidden');
  } else {
    document.getElementById('editNonLpuRadio').checked = true;
    document.getElementById('editSchoolName').value = submission.school;
    document.getElementById('editLpuFields').classList.add('hidden');
    document.getElementById('editProgramField').classList.add('hidden');
    document.getElementById('editCampusField').classList.add('hidden');
    document.getElementById('editSchoolField').classList.remove('hidden');
  }
  
  editModal.classList.remove('hidden');
}

// Function to hide edit modal
function hideEditModal() {
  editModal.classList.add('hidden');
  currentSubmissionToEdit = null;
  editForm.reset();
}

// Event listeners for edit modal
closeEditModalBtn.addEventListener('click', hideEditModal);
cancelEditBtn.addEventListener('click', hideEditModal);

// Toggle between LPU and Non-LPU fields in edit form
document.getElementById('editLpuRadio').addEventListener('change', function() {
  if (this.checked) {
    document.getElementById('editLpuFields').classList.remove('hidden');
    document.getElementById('editProgramField').classList.remove('hidden');
    document.getElementById('editCampusField').classList.remove('hidden');
    document.getElementById('editSchoolField').classList.add('hidden');
    document.getElementById('editStudentNumber').required = true;
    document.getElementById('editProgram').required = true;
    document.getElementById('editSchoolName').required = false;
  }
});

document.getElementById('editNonLpuRadio').addEventListener('change', function() {
  if (this.checked) {
    document.getElementById('editLpuFields').classList.add('hidden');
    document.getElementById('editProgramField').classList.add('hidden');
    document.getElementById('editCampusField').classList.add('hidden');
    document.getElementById('editSchoolField').classList.remove('hidden');
    document.getElementById('editStudentNumber').required = false;
    document.getElementById('editProgram').required = false;
    document.getElementById('editSchoolName').required = true;
  }
});

// Handle edit form submission
editForm.addEventListener('submit', function(e) {
  e.preventDefault();
  
  if (currentSubmissionToEdit) {
    // Update the submission with new values
    const updatedSubmission = {
      ...currentSubmissionToEdit,
      userType: document.getElementById('editLpuRadio').checked ? 'LPU' : 'Non-LPU',
      name: document.getElementById('editFullName').value,
      thesisTitle: document.getElementById('editThesisTitle').value,
      studentNumber: document.getElementById('editLpuRadio').checked ? document.getElementById('editStudentNumber').value : '-',
      program: document.getElementById('editLpuRadio').checked ? document.getElementById('editProgram').value : '-',
      campus: document.getElementById('editLpuRadio').checked ? document.getElementById('editCampus').value : '-',
      school: !document.getElementById('editLpuRadio').checked ? document.getElementById('editSchoolName').value : '-'
    };
    
    // Find and update the submission in the array
    const index = submissions.findIndex(sub => 
      sub.date === currentSubmissionToEdit.date && 
      sub.name === currentSubmissionToEdit.name
    );
    
    if (index !== -1) {
      submissions[index] = updatedSubmission;
      saveSubmissions();
      updateAdminTable();
      hideEditModal();
    }
  }
});

// Update the updateAdminTable function to include edit button functionality
function updateAdminTable() {
  const tbody = document.querySelector('#adminDashboard table tbody');
  tbody.innerHTML = '';
  
  const sortedSubmissions = [...submissions].sort((a, b) => {
    return new Date(b.date) - new Date(a.date);
  });
  
  sortedSubmissions.forEach(submission => {
    const tr = document.createElement('tr');
    tr.className = 'hover:bg-gray-50';
    tr.innerHTML = `
      <td class="py-3 px-4">${submission.date}</td>
      <td class="py-3 px-4">${submission.userType}</td>
      <td class="py-3 px-4">${submission.name}</td>
      <td class="py-3 px-4">${submission.studentNumber}</td>
      <td class="py-3 px-4">${submission.program}</td>
      <td class="py-3 px-4">${submission.school}</td>
      <td class="py-3 px-4">${submission.thesisTitle}</td>
      <td class="py-3 px-4">
        <div class="flex space-x-2">
          <button class="text-blue-600 hover:text-blue-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-eye-line"></i>
          </button>
          <button class="edit-btn text-green-600 hover:text-green-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-edit-line"></i>
          </button>
          <button class="delete-btn text-red-600 hover:text-red-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-delete-bin-line"></i>
          </button>
        </div>
      </td>
    `;
    tbody.appendChild(tr);
  });
  
  // Add event listeners to the new buttons
  addDeleteButtonListeners();
  addEditButtonListeners();
}

// Add edit button event listeners
function addEditButtonListeners() {
  document.querySelectorAll('.edit-btn').forEach(button => {
    button.addEventListener('click', function() {
      const row = this.closest('tr');
      const submission = {
        date: row.cells[0].textContent,
        userType: row.cells[1].textContent,
        name: row.cells[2].textContent,
        studentNumber: row.cells[3].textContent,
        program: row.cells[4].textContent,
        school: row.cells[5].textContent,
        thesisTitle: row.cells[6].textContent
      };
      showEditModal(submission);
    });
  });
}

// Initial render of the table
updateAdminTable();

// View functionality
const viewModal = document.getElementById('viewModal');
const closeViewModalBtn = document.getElementById('closeViewModalBtn');
const closeViewModalBtn2 = document.getElementById('closeViewModalBtn2');

// Function to show view modal
function showViewModal(submission) {
  // Format the date to include time
  const submissionDate = new Date(submission.date);
  const formattedDate = submissionDate.toLocaleString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  });
  
  // Populate the view modal with submission data
  document.getElementById('viewDate').textContent = formattedDate;
  document.getElementById('viewUserType').textContent = submission.userType;
  document.getElementById('viewName').textContent = submission.name;
  document.getElementById('viewThesisTitle').textContent = submission.thesisTitle;
  
  if (submission.userType === 'LPU') {
    document.getElementById('viewStudentNumber').textContent = submission.studentNumber;
    document.getElementById('viewCampus').textContent = submission.campus || 'Not specified';
    document.getElementById('viewProgram').textContent = submission.program;
    
    document.getElementById('viewStudentNumberContainer').classList.remove('hidden');
    document.getElementById('viewCampusContainer').classList.remove('hidden');
    document.getElementById('viewProgramContainer').classList.remove('hidden');
    document.getElementById('viewSchoolContainer').classList.add('hidden');
  } else {
    document.getElementById('viewSchool').textContent = submission.school;
    
    document.getElementById('viewStudentNumberContainer').classList.add('hidden');
    document.getElementById('viewCampusContainer').classList.add('hidden');
    document.getElementById('viewProgramContainer').classList.add('hidden');
    document.getElementById('viewSchoolContainer').classList.remove('hidden');
  }
  
  viewModal.classList.remove('hidden');
}

// Function to hide view modal
function hideViewModal() {
  viewModal.classList.add('hidden');
}

// Event listeners for view modal
closeViewModalBtn.addEventListener('click', hideViewModal);
closeViewModalBtn2.addEventListener('click', hideViewModal);

// Add view button event listeners
function addViewButtonListeners() {
  document.querySelectorAll('.view-btn').forEach(button => {
    button.addEventListener('click', function() {
      const row = this.closest('tr');
      const submission = {
        date: row.cells[0].textContent,
        userType: row.cells[1].textContent,
        name: row.cells[2].textContent,
        studentNumber: row.cells[3].textContent,
        program: row.cells[4].textContent,
        school: row.cells[5].textContent,
        thesisTitle: row.cells[6].textContent
      };
      showViewModal(submission);
    });
  });
}

// Update the updateAdminTable function to include view button functionality
function updateAdminTable() {
  const tbody = document.querySelector('#adminDashboard table tbody');
  tbody.innerHTML = '';
  
  const sortedSubmissions = [...submissions].sort((a, b) => {
    return new Date(b.date) - new Date(a.date);
  });
  
  sortedSubmissions.forEach(submission => {
    const tr = document.createElement('tr');
    tr.className = 'hover:bg-gray-50';
    tr.innerHTML = `
      <td class="py-3 px-4">${submission.date}</td>
      <td class="py-3 px-4">${submission.userType}</td>
      <td class="py-3 px-4">${submission.name}</td>
      <td class="py-3 px-4">${submission.studentNumber}</td>
      <td class="py-3 px-4">${submission.program}</td>
      <td class="py-3 px-4">${submission.school}</td>
      <td class="py-3 px-4">${submission.thesisTitle}</td>
      <td class="py-3 px-4">
        <div class="flex space-x-2">
          <button class="view-btn text-blue-600 hover:text-blue-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-eye-line"></i>
          </button>
          <button class="edit-btn text-green-600 hover:text-green-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-edit-line"></i>
          </button>
          <button class="delete-btn text-red-600 hover:text-red-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-delete-bin-line"></i>
          </button>
        </div>
      </td>
    `;
    tbody.appendChild(tr);
  });
  
  // Add event listeners to the new buttons
  addDeleteButtonListeners();
  addEditButtonListeners();
  addViewButtonListeners();
}

// Initial render of the table
updateAdminTable();

// Add search functionality
const searchInput = document.getElementById('searchInput');
const searchField = document.getElementById('searchField');
const dateFilter = document.getElementById('dateFilter');

// Update the filterSubmissions function to remove pagination
function filterSubmissions() {
  const searchTerm = searchInput.value.toLowerCase();
  const selectedField = searchField.value;
  const selectedDate = dateFilter.value;
  
  let filteredSubmissions = [...submissions];
  
  // Apply date filter if selected
  if (selectedDate) {
    filteredSubmissions = filteredSubmissions.filter(sub => sub.date === selectedDate);
  }
  
  // Apply search filter if search term exists
  if (searchTerm) {
    filteredSubmissions = filteredSubmissions.filter(sub => {
      if (selectedField === 'all') {
        return (
          sub.name.toLowerCase().includes(searchTerm) ||
          sub.studentNumber.toLowerCase().includes(searchTerm) ||
          sub.program.toLowerCase().includes(searchTerm) ||
          sub.school.toLowerCase().includes(searchTerm) ||
          sub.thesisTitle.toLowerCase().includes(searchTerm)
        );
      } else {
        const fieldValue = sub[selectedField].toLowerCase();
        return fieldValue.includes(searchTerm);
      }
    });
  }
  
  return filteredSubmissions;
}

// Remove updatePagination function and its references
function updatePagination(filteredSubmissions) {
  // Remove pagination functionality
}

// Update the updateTableWithFilters function to show all records
function updateTableWithFilters() {
  const filteredSubmissions = filterSubmissions();
  const tbody = document.querySelector('#adminDashboard table tbody');
  tbody.innerHTML = '';
  
  // Update export button text based on filters
  const searchTerm = searchInput.value;
  const selectedDate = dateFilter.value;
  const adminExportBtn = document.getElementById('adminExportBtn');
  
  if (searchTerm || selectedDate) {
    adminExportBtn.innerHTML = '<i class="ri-download-line mr-2"></i>Export Filtered Records';
  } else {
    adminExportBtn.innerHTML = '<i class="ri-download-line mr-2"></i>Export All Records';
  }
  
  // Show all filtered submissions
  filteredSubmissions.forEach(submission => {
    const tr = document.createElement('tr');
    tr.className = 'hover:bg-gray-50';
    tr.innerHTML = `
      <td class="py-3 px-4">${submission.date}</td>
      <td class="py-3 px-4">${submission.userType}</td>
      <td class="py-3 px-4">${submission.name}</td>
      <td class="py-3 px-4">${submission.studentNumber}</td>
      <td class="py-3 px-4">${submission.program}</td>
      <td class="py-3 px-4">${submission.school}</td>
      <td class="py-3 px-4">${submission.thesisTitle}</td>
      <td class="py-3 px-4">
        <div class="flex space-x-2">
          <button class="view-btn text-blue-600 hover:text-blue-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-eye-line"></i>
          </button>
          <button class="edit-btn text-green-600 hover:text-green-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-edit-line"></i>
          </button>
          <button class="delete-btn text-red-600 hover:text-red-800 w-8 h-8 flex items-center justify-center">
            <i class="ri-delete-bin-line"></i>
          </button>
        </div>
      </td>
    `;
    tbody.appendChild(tr);
  });
  
  // Add event listeners to the new buttons
  addDeleteButtonListeners();
  addEditButtonListeners();
  addViewButtonListeners();
}

// Add event listeners for search and filter
searchInput.addEventListener('input', updateTableWithFilters);
searchField.addEventListener('change', updateTableWithFilters);
dateFilter.addEventListener('change', updateTableWithFilters);

// Initial render
updateTableWithFilters();

// Add export functionality
const exportModal = document.getElementById('exportModal');
const closeExportModalBtn = document.getElementById('closeExportModalBtn');
const cancelExportBtn = document.getElementById('cancelExportBtn');
const confirmExportBtn = document.getElementById('confirmExportBtn');
const exportFormat = document.getElementById('exportFormat');
const adminExportBtn = document.getElementById('adminExportBtn');

// Show export modal
adminExportBtn.addEventListener('click', function() {
  // Get filtered submissions
  const filteredSubmissions = filterSubmissions();
  
  // Update modal title based on filters
  const searchTerm = searchInput.value;
  const selectedDate = dateFilter.value;
  const modalTitle = document.querySelector('#exportModal h3');
  const recordCountElement = document.getElementById('exportRecordCount');
  
  if (searchTerm || selectedDate) {
    modalTitle.innerHTML = '<i class="ri-download-line mr-2"></i>Export Filtered Records';
  } else {
    modalTitle.innerHTML = '<i class="ri-download-line mr-2"></i>Export All Records';
  }
  
  // Update record count
  recordCountElement.textContent = `${filteredSubmissions.length} records will be exported`;
  
  // Show the modal
  exportModal.classList.remove('hidden');
});

// Close export modal
function closeExportModal() {
  exportModal.classList.add('hidden');
}

closeExportModalBtn.addEventListener('click', closeExportModal);
cancelExportBtn.addEventListener('click', closeExportModal);

// Handle export confirmation
confirmExportBtn.addEventListener('click', function() {
  try {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    
    // Get selected fields
    const selectedFields = Array.from(document.querySelectorAll('#exportModal input[type="checkbox"]:checked')).map(cb => 
      cb.nextElementSibling.textContent.trim()
    );
    
    // Get filtered submissions
    const filteredSubmissions = filterSubmissions();
    
    // Prepare data for export
    const headers = selectedFields;
    const data = filteredSubmissions.map(sub => {
      const row = [];
      if (selectedFields.includes('Date')) row.push(sub.date);
      if (selectedFields.includes('User Type')) row.push(sub.userType);
      if (selectedFields.includes('Name')) row.push(sub.name);
      if (selectedFields.includes('Student Number')) row.push(sub.studentNumber);
      if (selectedFields.includes('Program/Department')) row.push(sub.program);
      if (selectedFields.includes('School Name')) row.push(sub.school);
      if (selectedFields.includes('Thesis Title')) row.push(sub.thesisTitle);
      return row;
    });
    
    // Add title
    doc.setFontSize(16);
    const searchTerm = searchInput.value;
    const selectedDate = dateFilter.value;
    const title = (searchTerm || selectedDate) ? 'Filtered Research Records Export' : 'Research Records Export';
    doc.text(title, 14, 15);
    
    // Add date and filter info
    doc.setFontSize(10);
    doc.text(`Generated on: ${new Date().toLocaleString()}`, 14, 25);
    
    // Add filter information
    let filterInfo = '';
    if (searchTerm) {
      const selectedField = searchField.value;
      filterInfo += `Search: "${searchTerm}" in ${selectedField === 'all' ? 'all fields' : selectedField}`;
    }
    if (selectedDate) {
      filterInfo += filterInfo ? `, Date: ${selectedDate}` : `Date: ${selectedDate}`;
    }
    
    if (filterInfo) {
      doc.text(`Filters applied: ${filterInfo}`, 14, 30);
      doc.text(`Records found: ${filteredSubmissions.length}`, 14, 35);
    }
    
    // Add table
    doc.autoTable({
      head: [headers],
      body: data,
      startY: filterInfo ? 45 : 35,
      theme: 'grid',
      headStyles: {
        fillColor: [191, 47, 47], // Primary color
        textColor: 255,
        fontStyle: 'bold'
      },
      styles: {
        fontSize: 8,
        cellPadding: 2
      },
      columnStyles: {
        0: { cellWidth: 20 },
        1: { cellWidth: 20 },
        2: { cellWidth: 30 },
        3: { cellWidth: 20 },
        4: { cellWidth: 30 },
        5: { cellWidth: 30 },
        6: { cellWidth: 40 }
      }
    });
    
    // Save the PDF with appropriate filename
    const filename = filterInfo ? 'filtered_research_records.pdf' : 'research_records_export.pdf';
    doc.save(filename);
    
    // Close the modal
    closeExportModal();
    
    // Show success message
    alert('Export successful! The file has been downloaded.');
  } catch (error) {
    console.error('Export failed:', error);
    alert('Export failed. Please try again or check the console for details.');
  }
});

// Function to reset the form completely
function resetForm() {
  const form = document.getElementById('researchForm');
  form.reset();
  
  // Reset radio buttons to default state
  document.getElementById('lpuRadio').checked = true;
  
  // Reset all input fields
  document.getElementById('fullName').value = '';
  document.getElementById('studentNumber').value = '';
  document.getElementById('campus').value = '';
  document.getElementById('program').value = '';
  document.getElementById('schoolName').value = '';
  document.getElementById('thesisTitle').value = '';
  
  // Reset field visibility
  document.getElementById('lpuFields').classList.remove('hidden');
  document.getElementById('programField').classList.remove('hidden');
  document.getElementById('schoolField').classList.add('hidden');
  
  // Reset required attributes
  document.getElementById('studentNumber').required = true;
  document.getElementById('program').required = true;
  document.getElementById('schoolName').required = false;
}

// Modify the form submission handler
researchForm.addEventListener('submit', function(e) {
  e.preventDefault();
  // ... existing submission code ...
  
  // After successful submission, reset the form
  resetForm();
});

// Update the admin logout function
function performLogout() {
  adminDashboard.classList.add('hidden');
  document.getElementById('submissionForm').classList.remove('hidden');
  adminLoginBtn.classList.remove('hidden');
  adminLogoutBtn.classList.add('hidden');
  // Clear admin login state
  localStorage.removeItem('adminLoggedIn');
  hideLogoutConfirmation();
  
  // Reset the form when logging out
  resetForm();
  
  // Refresh the page
  window.location.reload();
}

// Update the edit submission function
document.getElementById('editSubmissionBtn').addEventListener('click', function() {
  successModal.classList.add('hidden');
  resetForm();
});

// Update the final close buttons
document.getElementById('finalCloseBtn').addEventListener('click', function() {
  successModal.classList.add('hidden');
  resetForm();
});

document.getElementById('finalCloseBtn2').addEventListener('click', function() {
  successModal.classList.add('hidden');
  resetForm();
});
</script>
</body>
</html>